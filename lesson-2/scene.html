<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 2 - Import Model | COMP2144</title>
    <style>
        /* STEP 1: Have a look at some of the interesting CSS used to make sure the entire browser window object is used for the purpose of the Babylon.js Web app */
        html,
        body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }  
        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }
    </style>
    <!-- STEP 2: Examine the JavaScript dependencies served up from a CDN - which is fine for development -->  
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
    <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
    <!-- The below script tag is used to include PEP.js (Performance Evaluation Profiler) - a JavaScript library that helps you measure the performance of your web application (credit Gemini 1.5). -->
    <script src="https://code.jquery.com/pep/0.4.3/pep.js"></script>
</head>
<body>
    <!-- STEP 3: Create a canvas element with an id, and set the touch-action attribute to "none" -->
    <canvas id="renderCanvas" touch-action="none"></canvas>
    <!-- touch-action="none" for best results from PEP -->
 
    <script>
        // STEP 4: Get the canvas element as a const
        const canvas = document.querySelector("#renderCanvas");
        // STEP 5: Create the BABYON 3D engine, and attach it to the canvas
        const engine = new BABYLON.Engine(canvas, true);
        // STEP 6: Build the createScene function
        const createScene = function() {
            // STEP 8a: Create a new BABYLON scene, passing in the engine as an argument
            const scene = new BABYLON.Scene(engine);
            const box = BABYLON.MeshBuilder.CreateBox("box", {}, scene); // Create box mesh object
            const sphere = BABYLON.MeshBuilder.CreateSphere("sphere", {}, scene);
            sphere.position.y = 2;
            
            // added shape number 1
            const cylinder = BABYLON.MeshBuilder.CreateCylinder("cylinder", {height: 2, diameter: 1}, scene);
            cylinder.position.y = -2;
            
            // added shape number 2
            const donut = BABYLON.MeshBuilder.CreateTorus("donut", {thickness: 1, diameter: 2}, scene);
            donut.position.x = 5;
            
            // added shape number 3
            const cone = BABYLON.MeshBuilder.CreateCylinder("cone", {height: 2, diameterTop: 0, diameterBottom: 1}, scene);
            cone.position.y = 4;
            
            // added shape number 4
            // giving the pyramid a tessellation of 4 do that its got its 4 flat sides to make it look more like a pyramid
            const pyramid = BABYLON.MeshBuilder.CreateCylinder("pyramid", {height: 1, diameterTop: 0, diameterBottom: 1, tessellation: 4}, scene);
            pyramid.position.x = -4;
            
            // added shape number 5
            const hexagon = BABYLON.MeshBuilder.CreateCylinder("hexagon", {height: 1, diameter: 1, tessellation: 6}, scene);
            hexagon.position.x = -3;
            hexagon.position.y = 3;

            let material = new BABYLON.StandardMaterial("material", scene);
            material.diffuseColor = new BABYLON.Color3(1.0, 0.0, 0.0); // red
            sphere.material = material;
            
            // add more materials and colours for the other shapes, then apply the colour to the new shapes
            let material2 = new BABYLON.StandardMaterial("material2", scene);
            material2.diffuseColor = new BABYLON.Color3(0.0, 1.0, 0.0); // green
            cylinder.material = material2;

            let material3 = new BABYLON.StandardMaterial("material3", scene);
            material3.diffuseColor = new BABYLON.Color3(0.0, 0.0, 1.0); // blue
            donut.material = material3;

            let material4 = new BABYLON.StandardMaterial("material4", scene);
            material4.diffuseColor = new BABYLON.Color3(1.0, 1.0, 0.0); // yellow
            cone.material = material4;

            let material5 = new BABYLON.StandardMaterial("material5", scene);
            material5.diffuseColor = new BABYLON.Color3(1.0, 0.0, 1.0); // magenta
            pyramid.material = material5;

            let material6 = new BABYLON.StandardMaterial("material6", scene);
            material6.diffuseColor = new BABYLON.Color3(0.0, 1.0, 1.0); // cyan
            hexagon.material = material6;
            
            // here we're going to change the background via clearColor property of the scene. But I want to use a hex value because they're pretty. So instead of color 3 we use color 4
            scene.clearColor = new BABYLON.Color4.FromHexString("#f5f7a8"); // light yellow colour background

            // const camera = new BABYLON.ArcRotateCamera("camera", -Math.PI / 2, Math.PI / 2.5, 15, new BABYLON.Vector3(0, 0, 0)); // Add Arc Rotate Camera
            // camera.attachControl(canvas, true); // Attach camera control to the canvas
            // Replace the above camera with the below XR if you have a headset
            const xr = scene.createDefaultXRExperienceAsync();
 
            const light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(1, 1, 0));
            // STEP 8b: Return the scene
            return scene;
        }
        // STEP 7: Call the createScene function
        const scene = createScene();
        // STEP 8: Use the runRenderLoop() method to render the scene repeatedly
        engine.runRenderLoop(function(){
            scene.render();
        });
        // STEP 9: Add an event listener that adapts to the user resizing the screen
        window.addEventListener("resize", function(){
            engine.resize();
        });
        // STEP 10: Move the page up to a server (maybe GitHub Pages) and try it out!
    </script>
</body>
</html>